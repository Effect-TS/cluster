{"version":3,"file":"ShardManagerState.mjs","names":["equals","HashMap","HashSet","List","Option","PodWithMetadata","ShardId","make","pods","shards","podVersions","map","extractVersion","fromIterable","values","maxVersion","result","size","none","some","reduce","empty","curr","a","compareVersion","shardsPerPodPods","optionPod","shardId","isNone","has","value","modify","add","set","shardsPerPod","union","allPodsHaveMaxVersion","every","_","unassignedShards","k","filter","averageShardsPerPod","isEmpty"],"sources":["../src/ShardManagerState.ts"],"sourcesContent":[null],"mappings":"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"}