{"version":3,"file":"ShardManagerHttp.mjs","names":["Http","ShardManagerProtocolHttp","ManagerConfig","ShardManager","Effect","Layer","createServer","internalServer","unwrapEffect","gen","_","managerConfig","server","layer","port","apiPort","shardManagerHttp","scopedDiscard","shardManager","router","empty","pipe","post","body","request","schemaBodyJson","Register_","register","pod","response","json","Unregister_","unregister","address","NotifyUnhealthyPod_","notifyUnhealthyPod","podAddress","get","assignments","getAssignments","schemaJson","GetAssignmentsResult_","Array","from","prefixAll","serve","middleware","logger","use"],"sources":["../src/ShardManagerHttp.ts"],"sourcesContent":[null],"mappings":"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"}