{"version":3,"file":"ShardManagerHttp.mjs","names":["Effect","Layer","Http","ShardManagerProtocolHttp","ManagerConfig","ShardManager","createServer","internalServer","unwrapEffect","gen","_","managerConfig","server","layer","port","apiPort","shardManagerHttp","scopedDiscard","shardManager","router","empty","pipe","post","body","request","schemaBodyJson","Register_","register","pod","response","json","Unregister_","unregister","address","NotifyUnhealthyPod_","notifyUnhealthyPod","podAddress","get","assignments","getAssignments","schemaJson","GetAssignmentsResult_","Array","from","prefixAll","serve","middleware","logger","use"],"sources":["../src/ShardManagerHttp.ts"],"sourcesContent":[null],"mappings":"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"}