{"version":3,"file":"utils.js","names":["Chunk","_interopRequireWildcard","require","_Function","Effect","Schema","TreeFormatter","ShardingError","Stream","_nodeFetch","_interopRequireDefault","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","FetchError","url","body","error","_tag","isFetchError","value","jsonStringify","schema","pipe","encode","mapError","e","ShardingErrorSerialization","formatErrors","errors","map","_","JSON","stringify","jsonParse","sync","parse","flatMap","decode","sendInternal","send","data","tryPromise","try","signal","fetch","method","catch","String","reply","response","promise","text","orDie","flatten","sendStream","fromAsyncIterable","toString","splitLines","filter","line","length","startsWith","substring","trim","mapEffect","fromEffect","stringFromUint8ArrayString","encoding","stream","decoder","TextDecoder","mapChunks","bytes","uint8ArrayFromStringStream","TextEncoder","strings"],"sources":["./src/utils.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;AAIA,IAAAA,KAAA,gBAAAC,uBAAA,eAAAC,OAAA;AAEA,IAAAC,SAAA,gBAAAD,OAAA;AACA,IAAAE,MAAA,gBAAAH,uBAAA,eAAAC,OAAA;AACA,IAAAG,MAAA,gBAAAJ,uBAAA,eAAAC,OAAA;AACA,IAAAI,aAAA,gBAAAL,uBAAA,eAAAC,OAAA;AACA,IAAAK,aAAA,gBAAAN,uBAAA,eAAAC,OAAA;AACA,IAAAM,MAAA,gBAAAP,uBAAA,eAAAC,OAAA;AACA,IAAAO,UAAA,gBAAAC,sBAAA,eAAAR,OAAA;AAA8B,SAAAQ,uBAAAC,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,SAAAG,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAd,wBAAAU,GAAA,EAAAI,WAAA,SAAAA,WAAA,IAAAJ,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,oBAAAA,GAAA,wBAAAA,GAAA,4BAAAE,OAAA,EAAAF,GAAA,UAAAQ,KAAA,GAAAL,wBAAA,CAAAC,WAAA,OAAAI,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAT,GAAA,YAAAQ,KAAA,CAAAE,GAAA,CAAAV,GAAA,SAAAW,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAhB,GAAA,QAAAgB,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAnB,GAAA,EAAAgB,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAf,GAAA,EAAAgB,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAhB,GAAA,CAAAgB,GAAA,SAAAL,MAAA,CAAAT,OAAA,GAAAF,GAAA,MAAAQ,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAArB,GAAA,EAAAW,MAAA,YAAAA,MAAA;AAZ9B;;;;;AAsBA;AACM,SAAUW,UAAUA,CAACC,GAAW,EAAEC,IAAY,EAAEC,KAAa;EACjE,OAAQ;IAAEC,IAAI,EAAE,YAAY;IAAEH,GAAG;IAAEC,IAAI;IAAEC;EAAK,CAAE;AAClD;AAEA;AACM,SAAUE,YAAYA,CAACC,KAAc;EACzC,OAAO,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI,IAAI,MAAM,IAAIA,KAAK,IAAIA,KAAK,CAACF,IAAI,KAAK,YAAY;AACtG;AAEA;AACM,SAAUG,aAAaA,CAAOD,KAAQ,EAAEE,MAA2B;EACvE,OAAO,IAAAC,cAAI,EACTH,KAAK,EACLlC,MAAM,CAACsC,MAAM,CAACF,MAAM,CAAC,EACrBrC,MAAM,CAACwC,QAAQ,CAAEC,CAAC,IAAKtC,aAAa,CAACuC,0BAA0B,CAACxC,aAAa,CAACyC,YAAY,CAACF,CAAC,CAACG,MAAM,CAAC,CAAC,CAAC,EACtG5C,MAAM,CAAC6C,GAAG,CAAEC,CAAC,IAAKC,IAAI,CAACC,SAAS,CAACF,CAAC,CAAC,CAAC,CACrC;AACH;AAEA;AACM,SAAUG,SAASA,CAAOd,KAAa,EAAEE,MAA2B;EACxE,OAAO,IAAAC,cAAI,EACTtC,MAAM,CAACkD,IAAI,CAAC,MAAMH,IAAI,CAACI,KAAK,CAAChB,KAAK,CAAC,CAAC,EACpCnC,MAAM,CAACoD,OAAO,CAACnD,MAAM,CAACoD,MAAM,CAAChB,MAAM,CAAC,CAAC,EACrCrC,MAAM,CAACwC,QAAQ,CAAEC,CAAC,IAAKtC,aAAa,CAACuC,0BAA0B,CAACxC,aAAa,CAACyC,YAAY,CAACF,CAAC,CAACG,MAAM,CAAC,CAAC,CAAC,CACvG;AACH;AAEA;AACM,SAAUU,YAAYA,CAAOC,IAAyB;EAC1D,OAAO,CAACzB,GAAW,EAAE0B,IAAO,KAC1B,IAAAlB,cAAI,EACFF,aAAa,CAACoB,IAAI,EAAED,IAAI,CAAC;EACzB;EACAvD,MAAM,CAACoD,OAAO,CAAErB,IAAI,IAClB/B,MAAM,CAACyD,UAAU,CAAC;IAChBC,GAAG,EAAGC,MAAM,IAAI;MACd,OAAO,IAAAC,kBAAK,EAAC9B,GAAG,EAAE;QAChB6B,MAAM;QACNE,MAAM,EAAE,MAAM;QACd9B;OACD,CAAC;IACJ,CAAC;IACD+B,KAAK,EAAG9B,KAAK,IAAKH,UAAU,CAACC,GAAG,EAAEC,IAAI,EAAEgC,MAAM,CAAC/B,KAAK,CAAC;GACtD,CAAC;EAEJ;GACD;AACL;AAEA;AACM,SAAUuB,IAAIA,CAClBA,IAAyB,EACzBS,KAA6C;EAE7C,OAAO,CAAClC,GAAW,EAAE0B,IAAO,KAC1B,IAAAlB,cAAI,EACFgB,YAAY,CAACC,IAAI,CAAC,CAACzB,GAAG,EAAE0B,IAAI,CAAC,EAC7BxD,MAAM,CAACoD,OAAO,CAAEa,QAAQ,IAAKjE,MAAM,CAACkE,OAAO,CAAC,MAAMD,QAAQ,CAACE,IAAI,EAAE,CAAC,CAAC,EACnEnE,MAAM,CAACoD,OAAO,CAAEI,IAAI,IAAKP,SAAS,CAACO,IAAI,EAAEQ,KAAK,CAAC,CAAC,EAChDhE,MAAM,CAACoE,KAAK,EACZpE,MAAM,CAACqE,OAAO,CACf;AACL;AAEA;AACM,SAAUC,UAAUA,CACxBf,IAAyB,EACzBS,KAA6C;EAE7C,OAAO,CAAClC,GAAW,EAAE0B,IAAO,KAC1B,IAAAlB,cAAI,EACFgB,YAAY,CAACC,IAAI,CAAC,CAACzB,GAAG,EAAE0B,IAAI,CAAC,EAC7BxD,MAAM,CAAC6C,GAAG,CAAEoB,QAAQ,IAClB,IAAA3B,cAAI,EACFlC,MAAM,CAACmE,iBAAiB,CAACN,QAAQ,CAAClC,IAAI,EAAGU,CAAC,IAAKZ,UAAU,CAACC,GAAG,EAAE,EAAE,EAAEiC,MAAM,CAACtB,CAAC,CAAC,CAAC,CAAC,EAC9ErC,MAAM,CAACyC,GAAG,CAAEV,KAAK,IAAK,OAAOA,KAAK,KAAK,QAAQ,GAAGA,KAAK,GAAGA,KAAK,CAACqC,QAAQ,EAAE,CAAC,EAC3EpE,MAAM,CAACqE,UAAU,EACjBrE,MAAM,CAACsE,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,MAAM,GAAG,CAAC,CAAC,EACxCxE,MAAM,CAACyC,GAAG,CAAE8B,IAAI,IAAKA,IAAI,CAACE,UAAU,CAAC,OAAO,CAAC,GAAGF,IAAI,CAACG,SAAS,CAAC,OAAO,CAACF,MAAM,CAAC,CAACG,IAAI,EAAE,GAAGJ,IAAI,CAAC,EAC7FvE,MAAM,CAAC4E,SAAS,CAAExB,IAAI,IAAKP,SAAS,CAACO,IAAI,EAAEQ,KAAK,CAAC,CAAC,EAClD5D,MAAM,CAAC4E,SAAS,CAAElC,CAAC,IAAKA,CAAC,CAAC,CAC3B,CACF,EACD1C,MAAM,CAAC6E,UAAU,EACjB7E,MAAM,CAACiE,OAAO,EAAE,CACjB;AACL;AAEA;AACM,SAAUa,0BAA0BA,CAACC,QAAgB;EACzD,OAAcC,MAAuC,IAAI;IACvD,MAAMC,OAAO,GAAG,IAAIC,WAAW,CAACH,QAAQ,CAAC;IACzC,OAAO/E,MAAM,CAACmF,SAAS,CAACH,MAAM,EAAExF,KAAK,CAACiD,GAAG,CAAE2C,KAAK,IAAKH,OAAO,CAAChC,MAAM,CAACmC,KAAK,CAAC,CAAC,CAAC;EAC9E,CAAC;AACH;AAEA;AACM,SAAUC,0BAA0BA,CAAA;EACxC,OAAcL,MAAmC,IAAI;IACnD,MAAMC,OAAO,GAAG,IAAIK,WAAW,EAAE;IACjC,OAAOtF,MAAM,CAACmF,SAAS,CAACH,MAAM,EAAExF,KAAK,CAACiD,GAAG,CAAE8C,OAAO,IAAKN,OAAO,CAAC9C,MAAM,CAACoD,OAAO,CAAC,CAAC,CAAC;EAClF,CAAC;AACH"}