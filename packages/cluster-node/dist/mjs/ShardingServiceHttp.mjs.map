{"version":3,"file":"ShardingServiceHttp.mjs","names":["ShardingProtocolHttp","Sharding","ShardingConfig","Http","Effect","Either","HashSet","Layer","createServer","internalServer","unwrapEffect","gen","_","config","server","layer","port","shardingPort","shardingServiceHttp","scopedDiscard","sharding","router","empty","pipe","post","body","request","schemaBodyJson","AssignShard_","assign","fromIterable","shards","response","json","UnassignShards_","unassign","get","Send_","result","sendToLocalEntity","message","match","onFailure","left","onSuccess","right","schemaJson","SendResult_","serve","middleware","logger","use"],"sources":["../src/ShardingServiceHttp.ts"],"sourcesContent":[null],"mappings":"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"}