{"version":3,"file":"ShardManagerState.mjs","names":["equals","pipe","HashMap","HashSet","List","Option","PodWithMetadata","ShardId","make","pods","shards","podVersions","values","fromIterable","map","extractVersion","maxVersion","reduce","empty","curr","a","compareVersion","result","size","none","some","shardsPerPodPods","optionPod","shardId","isNone","has","value","modify","add","set","shardsPerPod","union","allPodsHaveMaxVersion","every","_","unassignedShards","filter","k","averageShardsPerPod","isEmpty"],"sources":["../../src/ShardManagerState.ts"],"sourcesContent":[null],"mappings":"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"}