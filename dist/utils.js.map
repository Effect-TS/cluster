{"version":3,"file":"utils.js","names":["HashMap","_interopRequireWildcard","require","HashSet","Option","Effect","Schema","TreeFormatter","ShardingError","Stream","_nodeFetch","_interopRequireDefault","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","FetchError","url","body","error","_tag","isFetchError","value","NotAMessageWithReplierDefect","message","MessageReturnedNotingDefect","minByOption","f","fa","current","none","item","isNone","some","groupBy","empty","k","modify","add","fromIterable","jsonStringify","schema","map","_","JSON","stringify","mapError","e","ShardingEncodeError","formatErrors","errors","encode","jsonParse","ShardingDecodeError","flatMap","decode","sync","parse","sendInternal","send","data","tryPromise","try","signal","fetch","method","catch","String","reply","flatten","orDie","response","promise","text","sendStream","fromEffect","mapEffect","line","startsWith","substring","length","trim","filter","splitLines","toString","fromAsyncIterable","showHashSet","fn","Array","from","join","showHashMap","fnK","showOption","match","onNone","onSome"],"sources":["../../src/utils.ts"],"sourcesContent":[null],"mappings":"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"}